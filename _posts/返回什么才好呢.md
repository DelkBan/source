---
title: 返回什么才好呢
date: 2018-09-21 08:30:00
tags:
- C++
- 引用
- 类和对象
---

由于对引用语法的不熟悉，导致这个问题考虑了很久才明白。

##### Tips

* 引用作为返回值：类型标识符 &函数名 （形参列表及类型说明） {函数体}
* `a.GetObj() = m;` 返回结果作为是，说明其**返回类型一定是个引用**
* this 指向该函数作用的对象
<!--more-->

#####  描述

程序填空，使其按要求输出

```

#include <iostream>
using namespace std;
class A {
public:
	int val;

	A(int
// 在此处补充你的代码
};
int main()
{
	int m,n;
	A a;
	cout << a.val << endl;
	while(cin >> m >> n) {
		a.GetObj() = m;
		cout << a.val << endl;
		a.GetObj() = A(n);
		cout << a.val<< endl;
	}
	return 0;
}

```

##### 输入

多组数据，每组一行，是整数m和n

##### 输出

先输出一行： 
123 
然后，对每组数据，输出两行，第一行是m,第二行是n

##### 样例输入

    2 3
    4 5

##### 样例输出

    123
    2
    3
    4
    5

##### 分析

主函数中，首先创建了类A的一个对象a，输出a中的val值，而通过对比输出可知，需要定义val的值为123。那么如何给val赋值呢？

**使用构造函数**

`A(int x=123) {val = x;}` 即为类的构造函数，在生成对象时自动调用。

接下来对输入的内容进行处理

`a.GetObj() = m;` 左边是调用了a的成员函数，而其返回结果作为**左值**，说明其**返回类型一定是个引用**

#### 引用作为返回值

要以引用作为返回函数值，则函数定义时要按照以下格式：

** 类型标识符 &函数名 （形参列表及类型说明） {函数体} **

其最大好处是，内存中不会产生被返回函数的副本。

回到这个问题中来，填入的代码如下：

    int x=123){
            val = x;
        }
        A &GetObj(){
            return *this;  
        }


      
第二个函数中，A是类型标识符，此函数的返回值是引用，**this指向该函数作用的对象**，GetOBbj作用的对象显然是a，因此this中存放的是指向a的地址，如果前面不加 * 的话，就会返回一个地址。这样m的值就赋值给了val。